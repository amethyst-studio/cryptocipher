name: yarn-tests

on:
  push:
    branches: [ master, develop ]
  pull_request:
    branches: [ master, develop ]

jobs:
  tests:
    if: "!contains(github.event.head_commit.message, 'skip ci')"
    runs-on: ubuntu-16.04

    strategy:
      matrix:
        node: [ '10', '12', '14' ]

    name: Node v${{ matrix.node }} Validation

    steps:
    - uses: actions/checkout@v2

    - name: Initialization Node.js Environment
      uses: actions/setup-node@v2.1.1
      with:
        node-version: ${{ matrix.node }}

    - name: Install Yarn Dependencies
      run: rm .yarnrc.yml && yarn set version berry && yarn install

    - name: Run Package Tests
      run: yarn project:build
      timeout-minutes: 3
